<h1>Интернет магазин с использованием FastAPI</h1>
Этот проект - личное приложение, разработанное с использованием FastAPI. Интернет магазин создан для демонстрации принципов построения API, обработки запросов и работы с базами данных. Основная цель проекта - показать навыки в разработке веб-приложений с использованием современных технологий.
<h2>Веб-сайт</h2>
<p>Главная страница проекта доступна по адресу https://fastapi-ecommerce.ru</p>
<p>Документация API проекта расположена по адресу https://fastapi-ecommerce.ru/docs. Эта документация включает в себя подробную информацию об API-эндпоинтах, моделях данных и Swagger UI для интерактивного тестирования API.</p>
<h2>Основные функции</h2>
<ol>
  <li><b>Управление пользователями:</b> Пользователи могут регистрироваться, входить в систему и смотреть информацию о своем аккаунте в профиле.</li>
  <li><b>Управление правами доступа:</b> Администратор может изменять роли пользователей, переключая их между ролями продавца и покупателя.</li>
  <li><b>Управление категориями товаров:</b> Администратор может управлять категориями товаров, включая создание, обновление и удаление категорий. Все пользователи (авторизированные) могут посмотреть все доступные категории товаров.</li>
  <li><b>Управление товарами:</b> Администратор и продавец могут добавлять, обновлять и удалять товары. Все пользователи (авторизованные) могут просматривать все доступные товары, товары по выбранной категории, а также детальную информацию о выбранном товаре.</li>
  <li><b>Отзывы о товарах:</b> Покупатели могут оставлять отзывы и оценки для товаров, которые они приобрели.</li>
</ol>
<h2>Используемые технологии</h2>
<ol>
  <li><b>FastAPI</b>: Современный, быстрый веб-фреймворк для разработки API на Python 3.7+, основанный на стандартных подсказках типов Python.</li>
  <li><b>PostgreSQL</b>: Мощная, открытая и свободная система управления реляционными базами данных.</li>
  <li><b>JWT-аутентификация</b>: Реализация аутентификации на основе JSON Web Tokens для безопасной аутентификации пользователей.</li>
  <li><b>Pydantic</b>: Библиотека для валидации данных и управления настройками в Python, часто используемая вместе с FastAPI.</li>
  <li><b>Uvicorn</b>: Легковесный ASGI-сервер, используемый для запуска приложений FastAPI в production-окружении.</li>
  <li><b>Gunicorn</b>: Высокопроизводительный WSGI-сервер, используемый для связи с Uvicorn.</li>
  <li><b>Nginx</b>: Высокопроизводительный веб-сервер, используемый для обратного проксирования запросов к Gunicorn.</li>
  <li><b>Docker и Docker Compose</b>: Технологии для создания и управления контейнерами, используемые для упаковки и развертывания всего проекта.</li>
  <li><b>SSH-туннель и PuTTY</b>: SSH-туннель - безопасное соединение для передачи данных между компьютерами, а PuTTY - программа для Windows, позволяющая устанавливать SSH-соединения и создавать туннели.</li>
  <li><b>Dbeaver</b>: Многофункциональная SQL-клиентская программа с открытым кодом для работы с различными базами данных, но для удаленного доступа требующая SSH-туннеля.</li>
</ol>
<h2>База данных</h2>
<img src="https://raw.githubusercontent.com/morozov831/fastapi_ecommerce/master/image.png">
<h3>Таблицы:</h3>
<ol>
  <li><b>Пользователи (users)</b>: Содержит информацию о пользователях системы, включая их идентификаторы, адреса электронной почты, пароли, имена, фамилии, роли и статусы активности.</li>
  <li><b>Категории (categories)</b>: Содержит информацию о категориях товаров для организации каталога.</li>
  <li><b>Товары (products)</b>: Содержит информацию о товарах, включая их названия, описания, цены, рейтинги, количество, статус активности и изображения.</li>
  <li><b>Отзывы (reviews)</b>: Содержит отзывы пользователей о заказанных товарах.</li>
  <li><b>Рейтинги (ratings)</b>: Содержит рейтинги пользователей заказанных товаров.</li>
</ol>
<h2>Структура проекта</h2>
<pre>
- fastapi-ecommerce [Folder]
 - app [Folder]   
    - backend [Folder]
       - db.py
       - db_depends.py
    - migrations [Folder]
    - models [Folder]
       - __init__.py
       - category.py
       - products.py
       - rating.py
       - review.py
       - user.py
    - routers [Folder]
       - __init__.py
       - auth.py
       - category.py
       - permission.py
       - products.py
       - reviews.py
    - __init__.py
    - Dockerfile.py
    - Dockerfile.prod
    - log.py
    - main.py
    - requirements.txt
    - schemas.py
- nginx [Folder]
    - Dockerfile
    - fastapi_ecommerce.conf
- .env.example
- alembic.ini
- docker-compose.prod.ynl
- docker-compose.yml
</pre>
<h2>Установка и запуск</h2>
<h3>Установка:</h3>

1. Склонируйте репозиторий проекта из GitHub:
   ```bash
   git clone https://github.com/morozov831/fastapi_ecommerce.git
   ```

2. Перейдите в каталог проекта:
   ```bash
   cd fastapi_ecommerce
   ```
3. Создайте и активируйте виртуальное окружение:
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

4. Установите необходимые пакеты:
   ```bash
   pip install -r requirements.txt
   ```
3. Переименуйте файл `.env.example` в `.env`:
   ```bash
   mv .env.example .env
   ```
4. Для настройки вашего приложения откройте файл `.env` в текстовом редакторе и
   заполните
   соответствующие значения для каждой переменной в зависимости от вашей среды.
   Обязательно
   предоставьте cекретный ключ, используемый для аутентификации
  JWT (JSON Web Token).
   После настройки эти переменные будут
   загружены в
   окружение вашего приложения во время его выполнения.
   <p>Вы можете установить свой собственный или сгенерировать случайный секретный ключ на сайте https://www.grc.com/passwords.htm</p>
<h4>Настройки базы данных:</h4>
  - <b>POSTGRES_DB, POSTGRES_USER, POSTGRES_PASSWORD:</b> Конфигурация для
    базы данных PostgreSQL (должна совпадать с DB_NAME, DB_USER и
    DB_PASSWORD соответственно).
<h3>Запуск:</h3>
1. Убедитесь, что Docker и Docker Compose установлены на вашей системе.
docker compose -f docker-compose.prod.yml build

2. Запустите следующую команду для сборки образов, создадия и запуска контейнеров:
   ```bash
   docker compose -f docker-compose.prod.yml up -d --build
   ```
2. После запуска контейнеров примените миграции:
   ```bash
   docker compose -f docker-compose.prod.yml exec web alembic upgrade head
   ```

3. Далее перейдите к документации Swagger
   по адресу http://127.0.0.1/docs, чтобы
   взаимодействовать с
   API.

Для остановки проекта:

1. Нажмите `Ctrl + C` в терминале, чтобы остановить запущенные контейнеры
   Docker.

2. Запустите следующую команду, чтобы остановить контейнеры Docker и удалить их:
   ```bash
   docker compose -f docker-compose.prod.yml down -v
   ```
<h2>Обратная связь</h2>

Если у вас есть какие-либо отзывы, вопросы или предложения относительно этого
проекта, пишите мне в Telegram https://t.me/morozov_831 Буду рад помочь Вам!

